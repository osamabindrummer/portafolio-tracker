<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="data-source:repo" content="osamabindrummer/portafolio-tracker">
    <meta name="data-source:branch" content="work">
    <title>Portafolio Tracker</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  </head>
  <body>
    <div id="app" class="app-shell">
      <header class="app-header">
        <div class="branding">
          <span class="branding-icon" aria-hidden="true">💸</span>
          <div class="branding-text">
            <h1>Portafolio Tracker</h1>
            <p class="tagline">Seguimiento unificado de Racional y Fintual</p>
          </div>
        </div>
        <div class="header-actions">
          <div class="actions-buttons" role="group" aria-label="Acciones de datos">
            <button id="refresh-button" class="header-button refresh-button" type="button">
              Actualizar datos
            </button>
          </div>
          <span id="last-update" class="last-update">Última actualización: --</span>
        </div>
      </header>
      <main class="app-main">
        <section id="metrics" class="metrics-panel" aria-labelledby="metrics-title">
          <div class="section-header">
            <h2 id="metrics-title">🚀 Métricas rápidas</h2>
            <p class="section-subtitle">Comparativa simultánea entre plataformas</p>
          </div>
          <div id="metrics-cards" class="metrics-grid"></div>
        </section>
        <section id="charts" class="charts-panel" aria-labelledby="charts-title">
          <div class="section-header">
            <h2 id="charts-title">📊 Gráficos</h2>
            <p class="section-subtitle">Evolución y retornos desde distintos ángulos</p>
          </div>
          <div class="charts-toolbar">
            <label for="chart-platform" class="chart-platform-label">Plataforma</label>
            <select id="chart-platform" class="chart-platform-select" aria-label="Selecciona la plataforma a visualizar"></select>
            <label for="chart-mode" class="chart-mode-label">Visualización</label>
            <select id="chart-mode" class="chart-mode-select" aria-label="Selecciona el gráfico a visualizar">
              <option value="monthly_change">Variación mensual</option>
              <option value="return_1y">Retorno 1 año</option>
              <option value="return_5y">Retorno 5 años</option>
              <option value="timeseries">Evolución normalizada (5 años)</option>
            </select>
          </div>
          <div class="chart-single">
            <article class="chart-card">
              <canvas id="main-chart" aria-label="Visualización del portafolio"></canvas>
            </article>
          </div>
        </section>
        <section id="tables" class="table-panel" aria-labelledby="table-title">
          <div class="section-header">
            <h2 id="table-title">💹 Detalle de holdings</h2>
            <p class="section-subtitle">Ticker, peso y métricas clave</p>
          </div>
          <div id="holdings-tables" class="tables-grid" role="group" aria-describedby="table-title"></div>
        </section>
        <section id="market-embed" class="market-panel" aria-labelledby="market-title">
          <div class="section-header">
            <h2 id="market-title">🎯 Mis acciones</h2>
            <p class="section-subtitle">
              Pulso de mis acciones individuales en Racional.
            </p>
          </div>
          <div class="market-embed-wrapper">
            <!-- TradingView Widget BEGIN -->
            <div class="tradingview-widget-container">
              <div class="tradingview-widget-container__widget"></div>
              <div class="tradingview-widget-copyright">
                <a href="https://es.tradingview.com/" rel="noopener nofollow" target="_blank">
                  <span class="blue-text">Track all markets on TradingView</span>
                </a>
              </div>
              <script
                type="text/javascript"
                src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js"
                async
              >
{
"lineWidth": 2,
"lineType": 0,
"chartType": "area",
"fontColor": "rgb(106, 109, 120)",
"gridLineColor": "rgba(46, 46, 46, 0.06)",
"volumeUpColor": "rgba(34, 171, 148, 0.5)",
"volumeDownColor": "rgba(247, 82, 95, 0.5)",
"backgroundColor": "#ffffff",
"widgetFontColor": "#0F0F0F",
"upColor": "#22ab94",
"downColor": "#f7525f",
"borderUpColor": "#22ab94",
"borderDownColor": "#f7525f",
"wickUpColor": "#22ab94",
"wickDownColor": "#f7525f",
"colorTheme": "light",
"isTransparent": false,
"locale": "es",
"chartOnly": false,
"scalePosition": "right",
"scaleMode": "Normal",
"fontFamily": "-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",
"valuesTracking": "1",
"changeMode": "price-and-percent",
"symbols": [
  [
    "NASDAQ:NVDA|1D|USD"
  ],
  [
    "NASDAQ:AAPL|1D|USD"
  ],
  [
    "AMEX:VTI|1D|USD"
  ],
  [
    "NASDAQ:ARM|1D|USD"
  ],
  [
    "CBOE:ESGV|1D|USD"
  ],
  [
    "AMEX:BLOK|1D|USD"
  ],
  [
    "NASDAQ:PHO|1D|USD"
  ]
],
"dateRanges": [
  "1d|1",
  "1m|30",
  "3m|60",
  "12m|1D",
  "60m|1W",
  "all|1M"
],
"fontSize": "10",
"headerFontSize": "medium",
"autosize": true,
"width": "100%",
"height": "100%",
"noTimeScale": false,
"hideDateRanges": false,
"hideMarketStatus": false,
"hideSymbolLogo": false
}
              </script>
            </div>
            <!-- TradingView Widget END -->
          </div>
        </section>
      </main>
      <footer class="app-footer">
        <p>Daniel Salas. 2025.</p>
      </footer>
    </div>
    <script type="module" src="assets/js/app.js"></script>
  </body>
</html>
